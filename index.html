<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Note Taking App</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background-color: #f0f0f5; /* Light, neutral background */
      font-family: 'Roboto', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    header {
      background-color: #00D8CA; /* Turquoise header */
      color: #0A1F46; /* Dark blue text */
      border-radius: 5px;
      width: 100%;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      margin-bottom: 20px;
    }

    #notes-container {
      width: 100%;
      max-width: 600px; /* Cap max width */
    }

    .note-card {
      background-color: #fff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .note-card:hover {
      transform: translateY(-3px); /* Slight lift on hover */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    /* Add your existing styles here */

    #add-note-button {
      background-color: #0A1F46; /* Dark blue button */
      color: white;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      cursor: pointer;
      margin-top: 20px;
    }

    #addNoteDialog {
      display: none; /* Hidden by default */
      background-color: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      width: 90%;
      max-width: 400px;
    }

    #addNoteDialog[open] {
      display: block; /* Make the dialog visible when 'open' */
    }

    /* Media query for smaller screens */
    @media (max-width: 600px) {
      header {
        padding: 10px;
      }

      #addNoteDialog {
        width: 100%;
        max-width: none;
      }
    }
    section{
      position:relative
    }
    .lock{
      position: absolute;
      right:0;
      top:5px
    }
    
body.locked {
  overflow: hidden;
  position: relative;
   background-image: url('https://images.unsplash.com/photo-1616761286619-2acae0580383?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE3MTI1MTMyMDJ8&ixlib=rb-4.0.3&q=85');
  background-size:cover
  
}

body.locked::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}

dialog {
  position: fixed;
  top: 20%;
  left: 20%;
  transform: translate(-50%, -50%);
  width: 80%;
  max-width: 300px;
  padding: 20px;
  box-sizing: border-box;
  background-color: white;
  border: none;
  border-radius: 5px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

dialog::backdrop {
  background-color: rgba(0, 0, 0, 0.8);
}
    .contentP{
      border-bottom:0.5pt solid;
      padding:15px
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome, <span id="userGreeting"></span></h1>
    <div class="note-info">
      You have <span id="noteCount">0</span> notes and <span id="wordCount">0</span> words in this notes app.
    </div>
    <section class="lock"><dialog id="lockDialog">
  <form id="lockForm">
    <input type="password" id="lockInput" pattern="[a-zA-Z0-9]{4}" required>
    <button type="submit"><svg viewBox="0 0 576 512" width="10" title="lock-open">
  <path d="M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z" />
</svg></button>
  </form>
</dialog>
<button id="lockButton"><svg viewBox="0 0 640 512" width="70" title="user-lock">
  <path d="M224 256A128 128 0 1 0 96 128a128 128 0 0 0 128 128zm96 64a63.08 63.08 0 0 1 8.1-30.5c-4.8-.5-9.5-1.5-14.5-1.5h-16.7a174.08 174.08 0 0 1-145.8 0h-16.7A134.43 134.43 0 0 0 0 422.4V464a48 48 0 0 0 48 48h280.9a63.54 63.54 0 0 1-8.9-32zm288-32h-32v-80a80 80 0 0 0-160 0v80h-32a32 32 0 0 0-32 32v160a32 32 0 0 0 32 32h224a32 32 0 0 0 32-32V320a32 32 0 0 0-32-32zM496 432a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm32-144h-64v-80a32 32 0 0 1 64 0z" />
</svg></button></section>
    <select id="authorSelect">
      <option value="User 1">User 1</option>
      <!-- Add more options for other authors if needed -->
      <option value="custom">Custom</option>
    </select>
    <input type="text" id="customAuthorInput" placeholder="Enter custom author name" style="display: none;">
    <button id="setCustomAuthorButton">is Author</button>
  </header>

  <div id="notes-container">
    <!-- Notes will be displayed here -->
  </div>

  <button id="add-note-button">+</button>

  <dialog id="addNoteDialog">
    <form id="addNoteForm">
      <label for="noteTitle">Title:</label><br>
      <input type="text" id="noteTitle" oninput="updateAuthorAndDate()"><br>
      <label for="noteContent">Content:</label><br>
      <textarea id="noteContent" oninput="updateAuthorAndDate()"></textarea><br>
      <button type="submit">Add</button>
      <button type="button" id="close-dialog-button">Close</button>
    </form>
  </dialog>

  <script>
    document.addEventListener('DOMContentLoaded', initialize);

    function initialize() {
      const authorSelect = document.getElementById('authorSelect');
      const customAuthorInput = document.getElementById('customAuthorInput');
      const setCustomAuthorButton = document.getElementById('setCustomAuthorButton');
      const addNoteButton = document.getElementById('add-note-button');
      const addNoteDialog = document.getElementById('addNoteDialog');

      if (!authorSelect || !customAuthorInput || !setCustomAuthorButton || !addNoteButton || !addNoteDialog) {
        console.error('Error: One or more elements not found');
        return;
      }

      authorSelect.addEventListener('change', changeAuthor);
      setCustomAuthorButton.addEventListener('click', setCustomAuthor);
      addNoteButton.addEventListener('click', () => {
        addNoteDialog.showModal();
      });

      const addNoteForm = document.getElementById('addNoteForm');
      addNoteForm.addEventListener('submit', (event) => {
        event.preventDefault(); // Prevent form submission
        addNote();
      });

      // Close button functionality
      const closeDialogButton = document.getElementById('close-dialog-button');
      closeDialogButton.addEventListener('click', () => {
        addNoteDialog.close();
      });

      loadUserInfo();
      displayNotes();
    }

    const loadUserInfo = () => {
      const currentAuthor = localStorage.getItem('currentAuthor') || 'User 1';
      document.getElementById('userGreeting').innerText = currentAuthor;
      document.getElementById('authorSelect').value = currentAuthor;
    };

    const changeAuthor = () => {
      const currentAuthor = document.getElementById('authorSelect').value;
      customAuthorInput.style.display = currentAuthor === 'custom' ? 'inline' : 'none';
      localStorage.setItem('currentAuthor', currentAuthor);
      loadUserInfo();
      displayNotes();
    };

    const setCustomAuthor = () => {
      const customAuthorName = customAuthorInput.value.trim();
      if (customAuthorName) {
        const authorSelect = document.getElementById('authorSelect');
        authorSelect.appendChild(createOption(customAuthorName));
        authorSelect.value = customAuthorName;
        customAuthorInput.value = '';
        localStorage.setItem('currentAuthor', customAuthorName);
        loadUserInfo();
        displayNotes();
      }
    };

    const createOption = (value, text = value) => {
      const option = document.createElement('option');
      option.value = value;
      option.textContent = text;
      return option;
    };

    const displayNotes = () => {
      const notesContainer = document.getElementById('notes-container');
      notesContainer.innerHTML = ''; // Clear previous notes
      const notes = getNotesFromStorage();
      notes.forEach((note, index) => {
        notesContainer.appendChild(createNoteCard(note, index));
      });
      updateNoteInfo(notes.length);
    };

    const getNotesFromStorage = () => {
      return JSON.parse(localStorage.getItem('notes')) || [];
    };

    const updateNoteInfo = (noteCount) => {
      document.getElementById('noteCount').innerText = noteCount;
      const wordCount = getWordCount();
      document.getElementById('wordCount').innerText = wordCount;
    };

    const getWordCount = () => {
      const notes = getNotesFromStorage();
      return notes.reduce((total, note) => total + (note.content.trim().split(/\s+/).length || 0), 0);
    };

    const addNote = () => {
      const noteTitle = document.getElementById('noteTitle').value.trim();
      const noteContent = document.getElementById('noteContent').value.trim();
      const currentAuthor = document.getElementById('authorSelect').value;
      if (noteTitle || noteContent) {
        const timeStamp = new Date().toLocaleString();
        const newNote = { title: noteTitle, content: noteContent, author: currentAuthor, timestamp: timeStamp };
        saveNoteToStorage(newNote);
        displayNotes();
        addNoteDialog.close(); // Close the dialog after adding the note
        resetAddNoteForm(); // Reset the form fields
      }
    };

    const resetAddNoteForm = () => {
      document.getElementById('addNoteForm').reset();
    };

    const saveNoteToStorage = (note) => {
      const notes = getNotesFromStorage();
      notes.push(note);
      localStorage.setItem('notes', JSON.stringify(notes));
    };

    const createNoteCard = (note, index) => {
      const noteCard = document.createElement('div');
      noteCard.className = 'note-card';

      noteCard.innerHTML = `
        <h2 contenteditable="true" onBlur="updateNoteTitle(${index}, this.innerText)">${note.title || 'Untitled'}</h2>
        <p>Author: ${note.author || 'Unknown'}</p>
        <p>Created at: <span id="creation-date-${index}">${note.timestamp || 'Unknown'}</span></p>
        <p class="contentP" contenteditable="true" onBlur="updateNoteContent(${index}, this.innerText)">${note.content}</p>
        <button onclick="deleteNote(${index})">Delete</button>
      `;

      return noteCard;
    };

    const updateNoteTitle = (index, newTitle) => {
      const notes = getNotesFromStorage();
      notes[index].title = newTitle;
      updateAuthorAndDate(index, notes[index]);
      saveNotesToStorage(notes);
    };

    const updateNoteContent = (index, newContent) => {
      const notes = getNotesFromStorage();
      notes[index].content = newContent;
      updateAuthorAndDate(index, notes[index]);
      saveNotesToStorage(notes);
    };

    const updateAuthorAndDate = (index, note) => {
      const currentAuthor = document.getElementById('authorSelect').value;
      note.author = currentAuthor;
      const timeStamp = new Date().toLocaleString();
      note.timestamp = timeStamp;
      if (index !== undefined) {
        document.getElementById(`creation-date-${index}`).innerText = timeStamp;
      }
    };

    const saveNotesToStorage = (notes) => {
      localStorage.setItem('notes', JSON.stringify(notes));
      displayNotes();
    };

    const deleteNote = (index) => {
      const notes = getNotesFromStorage();
      notes.splice(index, 1);
      saveNotesToStorage(notes);
    };
  </script>
 <!-- lock the page -->
  <script>
  const lockDialog = document.getElementById("lockDialog");
const lockForm = document.getElementById("lockForm");
const lockInput = document.getElementById("lockInput");
const lockButton = document.getElementById("lockButton");
const body = document.body;

let lockCode = "3579"; // Set the lock code here

lockButton.addEventListener("click", () => {
  lockDialog.showModal();
  body.style.overflow = "hidden";
  body.classList.add("locked");
});

lockForm.addEventListener("submit", (event) => {
  event.preventDefault();
  if (lockInput.value === lockCode) {
    lockDialog.close();
    body.style.overflow = "auto";
    body.classList.remove("locked");
  }
});
  </script>
</body>
</html>
